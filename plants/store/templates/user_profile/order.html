{% include 'base_sidebar.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Order</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', sans-serif;
    }
    .order-container {
      max-width: 1000px;
      margin: 40px auto;
      padding: 20px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }
    .order-card {
      border-bottom: 1px solid #dee2e6;
      padding: 15px 0;
    }
    .order-header {
      font-weight: 600;
      font-size: 1.2rem;
    }
    .order-details {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .order-image {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 5px;
      margin-right: 15px;
    }
    .order-info {
      flex: 1;
    }
    .btn-track, .btn-view {
      margin-right: 10px;
    }
    .rating-stars {
      color: #ffc107;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <div class="container order-container">
    <h4 class="mb-4">Order History</h4>
    {% for order in orders %}
      <div class="order-card">
        <div class="order-details">
          <img src="{{ order.product.image.url }}" alt="{{ order.product.name }}" class="order-image">
          <div class="order-info">
            <div class="order-header">Order ID: #{{ order.id }}</div>
            <p class="mb-1">Product: {{ order.product.name }}</p>
            <p class="mb-1">Amount: ₹{{ order.total_amount }}</p>
            <p class="mb-1">Status: {{ order.status }}</p>
            <p class="mb-1">Ordered on: {{ order.created_at|date:"M d, Y H:i" }}</p>
            {% if order.review %}
              <p class="mb-1 rating-stars">
                Rating: {% for i in "12345" %}{% if i|int <= order.review.rating %}★{% else %}☆{% endif %}{% endfor %}
              </p>
            {% endif %}
          </div>
          <div class="text-right">
            <a href="{% url 'track_order' order.id %}" class="btn btn-outline-primary btn-sm btn-track">Track Order</a>
            <a href="{% url 'order_details' order.id %}" class="btn btn-outline-secondary btn-sm btn-view">View Details</a>
          </div>
        </div>
      </div>
    {% empty %}
      <p class="text-center">No orders found.</p>
    {% endfor %}
  </div>
</body>
</html>
