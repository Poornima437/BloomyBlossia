{% extends 'custom_admin/customadmin_base.html' %}
{% load static %}
{% block content %}
<div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div class="bg-white rounded shadow p-4">
                <h3 class="text-sm text-gray-500">Today's Sales</h3>
                <p class="text-2xl font-bold mt-1">₹100,999</p>
            </div>
            <div class="bg-white rounded shadow p-4">
                <h3 class="text-sm text-gray-500">Revenue</h3>
                <p class="text-2xl font-bold mt-1">₹30,000</p>
            </div>
            <div class="bg-white rounded shadow p-4">
                <h3 class="text-sm text-gray-500">Total Users</h3>
                <p class="text-2xl font-bold mt-1">20,390</p>
            </div>
    </div>
</div>



  <!-- Revenue Chart -->
  <div class="bg-white rounded shadow p-4 mb-6">
    <div class="flex justify-between items-center mb-3">
      <h3 class="text-lg font-semibold">Total Revenue</h3>
      <span class="text-green-600 text-sm">+5% than last month</span>
    </div>
    <canvas id="revenueChart" height="100"></canvas>
  </div>

  <!-- Latest Orders Table -->
  <div class="bg-white rounded shadow p-4">
    <h3 class="text-lg font-semibold mb-4">Latest Orders</h3>
    <div class="overflow-x-auto">
      <table class="min-w-full text-sm text-left">
        <thead class="bg-gray-100 text-gray-600">
          <tr>
            <th class="px-4 py-2">Order ID</th>
            <th class="px-4 py-2">Product</th>
            <th class="px-4 py-2">Date</th>
            <th class="px-4 py-2">Customer</th>
            <th class="px-4 py-2">Total</th>
            <th class="px-4 py-2">Payment</th>
            <th class="px-4 py-2">Status</th>
            <th class="px-4 py-2">Action</th>
          </tr>
        </thead>
        <tbody class="text-gray-700">
          {% for order in orders %}
          <tr class="border-t">
            <td class="px-4 py-2 text-green-600 font-semibold">{{ order.id }}</td>
            <td class="px-4 py-2">{{ order.product_name }}<br><span class="text-gray-400 text-xs">+3 Products</span></td>
            <td class="px-4 py-2">{{ order.date }}</td>
            <td class="px-4 py-2">{{ order.customer }}</td>
            <td class="px-4 py-2">₹{{ order.total }}</td>
            <td class="px-4 py-2">{{ order.payment_date }}</td>
            <td class="px-4 py-2">
              <span class="bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded">Processing</span>
            </td>
            <td class="px-4 py-2 space-x-2">
              <a href="#"><i class="fas fa-eye text-gray-600"></i></a>
              <a href="#"><i class="fas fa-trash text-red-500"></i></a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('revenueChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
      datasets: [
        {
          label: 'Profit',
          data: [80000, 95000, 97000, 67000, 87000, 40000, 70000, 90000, 85000],
          backgroundColor: '#3B82F6'
        },
        {
          label: 'Loss',
          data: [45000, 60000, 30000, 82000, 50000, 27000, 35000, 48000, 42000],
          backgroundColor: '#D1D5DB'
        }
      ]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>
{% endblock %}